---
phase: 02-content-infrastructure
plan: 02
type: execute
wave: 2
depends_on: ["01"]
files_modified:
  - templates/lab-template.md
  - templates/content-template.md
  - templates/quiz-template.md
  - templates/AUTHORING-GUIDE.md
autonomous: true

must_haves:
  truths:
    - "Lab template has all 8 required sections in correct order (Objectives, Prerequisites, Setup, Tasks, Verification, Cleanup, Troubleshooting, Key Takeaways)"
    - "Content template provides flexible H2/H3 structure with admonition and code block examples"
    - "Quiz template uses Markdown format with question type, options, correct answer, and explanation fields"
    - "Authoring guide documents code block conventions, admonition usage, voice/tone, and diagram embedding patterns"
    - "Authoring guide documents full Docusaurus project structure for course replication"
    - "Authoring guide documents build and deploy workflow for GitHub Actions"
  artifacts:
    - path: "templates/lab-template.md"
      provides: "8-section lab template for all modules"
      min_lines: 60
    - path: "templates/content-template.md"
      provides: "Flexible content reading template"
      min_lines: 50
    - path: "templates/quiz-template.md"
      provides: "TutorLMS-compatible quiz format template"
      min_lines: 40
    - path: "templates/AUTHORING-GUIDE.md"
      provides: "Content authoring conventions, project structure, and deployment workflow"
      min_lines: 120
  key_links:
    - from: "templates/AUTHORING-GUIDE.md"
      to: "templates/lab-template.md"
      via: "cross-reference to lab template"
      pattern: "lab-template\\.md"
    - from: "templates/AUTHORING-GUIDE.md"
      to: "templates/content-template.md"
      via: "cross-reference to content template"
      pattern: "content-template\\.md"
    - from: "templates/AUTHORING-GUIDE.md"
      to: "templates/quiz-template.md"
      via: "cross-reference to quiz template"
      pattern: "quiz-template\\.md"
    - from: "templates/AUTHORING-GUIDE.md"
      to: "diagrams/README.md"
      via: "cross-reference to diagram workflow docs"
      pattern: "diagrams/README\\.md"
    - from: "templates/AUTHORING-GUIDE.md"
      to: ".github/workflows/deploy.yml"
      via: "cross-reference to deployment workflow"
      pattern: "deploy\\.yml"
---

<objective>
Create reusable content templates (lab, reading, quiz) and a comprehensive authoring guide that course authors use to create consistent content across all 10 modules.

Purpose: Establish content patterns and conventions so every module follows the same structure, tone, and formatting standards. Templates are the "blueprint" for Phases 3-4 content creation. The authoring guide also documents the full project structure and deployment workflow for future course replication (TEMPLATE-01, TEMPLATE-04).
Output: Four template files in `templates/` directory ready for use in content authoring.
</objective>

<execution_context>
@/Users/gshah/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gshah/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-content-infrastructure/02-CONTEXT.md
@.planning/phases/02-content-infrastructure/02-RESEARCH.md
@.planning/phases/02-content-infrastructure/02-01-SUMMARY.md
@.github/workflows/deploy.yml
@docusaurus.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Lab, Content, and Quiz Templates</name>
  <files>
    templates/lab-template.md
    templates/content-template.md
    templates/quiz-template.md
  </files>
  <action>
  Create the `templates/` directory at project root and add three template files.

  **1. `templates/lab-template.md`** - Lab format template per user decision (LOCKED):

  Must include all 8 sections in this exact order:
  - **Objectives** - 3-5 bullet points of learning outcomes
  - **Prerequisites** - Required previous modules, tools, cluster state
  - **Setup** - Step-by-step environment preparation with full bash commands (copy-pasteable)
  - **Tasks** - Numbered task sections (Task 1, Task 2, etc.) with step-by-step instructions, bash/yaml code blocks with language tags, expected output shown in code blocks
  - **Verification** - kubectl commands to confirm success, with expected output
  - **Cleanup** - Resource teardown commands
  - **Troubleshooting** - 2-3 common issues formatted as: Issue heading, Symptom, Cause, Solution
  - **Key Takeaways** - 3-5 bullet points summarizing what was learned

  Use Example Voting App references as placeholder context. Include language tags on all code blocks (bash, yaml). Include placeholder comments like `[Replace with module-specific content]`.

  **2. `templates/content-template.md`** - Reading material template (flexible framework per user decision):

  Suggested H2 sections (authors adapt to module needs):
  - **Overview** - 1-2 paragraphs on what and why
  - **Key Concepts** - H3 subsections for each concept with explanations
  - **Practical Examples** - Real-world scenarios using Example Voting App
  - **Common Patterns** - Best practices and recommended approaches
  - **Gotchas and Pitfalls** - What to avoid and why
  - **Summary** - 3-5 key takeaway bullets
  - **Further Reading** - Links to official docs

  Include example admonitions (tip, caution, note) showing correct Docusaurus syntax. Include example code blocks with language tags and title attributes. Note at top that this is a flexible framework - not all sections required for every module.

  **3. `templates/quiz-template.md`** - Quiz preparation template per user decision (LOCKED):

  Must demonstrate all three question types:
  - **Multiple Choice** - Question, 4 options (A/B/C/D), correct answer letter, explanation
  - **True/False** - Question, correct answer (True/False), explanation
  - **Scenario** - Context paragraph, question, 4 options, correct answer, explanation

  Include 3 example questions (one of each type) with Kubernetes-relevant placeholder content. Target volume note: 10-15 questions per module. Include metadata header with module number, topic, and question count. Format must align with TutorLMS spreadsheet import fields (question type, question text, options, correct answer, explanation).
  </action>
  <verify>
  - `templates/lab-template.md` exists with all 8 sections in correct order
  - `templates/content-template.md` exists with suggested sections, admonition examples, code block examples
  - `templates/quiz-template.md` exists with all 3 question types demonstrated
  - All code blocks in templates have language tags (no bare triple backticks)
  - No MDX components in templates (plain Markdown per user decision)
  </verify>
  <done>Three template files created: lab (8 sections, plain MD), content (flexible framework with admonition/code examples), quiz (3 question types for TutorLMS conversion). All use Example Voting App context and follow locked user decisions.</done>
</task>

<task type="auto">
  <name>Task 2: Create Authoring Guide with Project Structure and Deployment Docs</name>
  <files>templates/AUTHORING-GUIDE.md</files>
  <action>
  Create `templates/AUTHORING-GUIDE.md` as the comprehensive reference for content authors. This is the single source of truth for all content conventions, project structure, and deployment workflow.

  Structure with these sections:

  **1. Templates Overview** - List the three templates with brief purpose and link to each:
  - `lab-template.md` - Hands-on lab structure
  - `content-template.md` - Reading material structure
  - `quiz-template.md` - Quiz preparation format

  **2. Voice and Tone** (per user decision - LOCKED):
  - Conversational and friendly
  - Direct address: use "you" and "we"
  - Approachable teaching style
  - No emojis (per project memory)
  - Simple language, analogies welcome, avoid unnecessary complexity
  - Target: 10-20 minute read time per module

  **3. Code Block Conventions** (per user decision - LOCKED):
  - Language tags ALWAYS required (`yaml`, `bash`, `json`, etc. - never plain triple backticks)
  - Show available languages: bash, yaml, json, typescript, docker, go, python, hcl
  - Title attribute for filenames: ```yaml title="deployment.yaml"```
  - Line highlighting: prefer magic comments (`# highlight-next-line`) over metadata ranges
  - Copy-friendly commands: single lines when possible, backslash continuation for long commands
  - Recommended max line length: 80 characters
  - Consistent indentation: 2 spaces for YAML
  - Selective commenting: annotate non-obvious operations, explain "why" not "what" (intermediate audience understands basic K8s YAML)

  **4. Admonition Usage** (Claude's discretion):
  Document the five built-in types with usage guidance:
  - `note` - Background info, context
  - `tip` - Best practices, shortcuts, pro tips
  - `info` - Version notes, compatibility, FYI
  - `caution` - Potential issues, deprecated features (use instead of `warning` which is deprecated in v4)
  - `danger` - Critical warnings, data loss, security risks
  Rules: Custom titles with `:::note[Custom Title]`, blank lines around admonitions (Prettier compatibility), limit 1-2 admonitions per section to avoid callout fatigue.

  **5. Diagram Embedding** - Reference `diagrams/README.md` for full workflow, but include quick embedding patterns:
  - Mermaid: use code blocks with ```mermaid``` (rendered natively)
  - Excalidraw/images: use relative paths `![Alt](../../diagrams/section-N/NN-name.svg)`
  - Never hardcode base URLs (GitHub Pages base path issue)

  **6. Quiz Conventions** - Reference `quiz-template.md`, note:
  - 10-15 questions per module
  - Mix of MCQ, True/False, Scenario types
  - Storage: `docs/section-N/quiz.md` (co-located with module content)
  - Purpose: TutorLMS import, not Docusaurus display

  **7. Project Structure** (TEMPLATE-01 - full Docusaurus project structure for course replication):
  Document the COMPLETE project layout, not just per-module files. Include:

  ```
  kubernetes-intermediate/
  ├── .github/
  │   └── workflows/
  │       └── deploy.yml              # GitHub Actions deployment to GitHub Pages
  ├── .planning/                      # GSD planning artifacts (not part of course template)
  ├── diagrams/                       # Centralized diagram source files
  │   ├── section-0/ through section-9/  # Module-specific diagrams
  │   └── shared/                     # Cross-module diagrams
  ├── docs/                           # Course content (auto-generates sidebar)
  │   ├── index.mdx                   # Course homepage (slug: /)
  │   └── section-N/                  # One folder per module
  │       ├── _category_.json         # Sidebar label, position, collapsible
  │       ├── 01-overview.mdx         # Module overview page
  │       ├── 02-reading.md           # Main content (use content-template.md)
  │       ├── 03-lab.md               # Hands-on lab (use lab-template.md)
  │       └── quiz.md                 # Quiz prep (use quiz-template.md)
  ├── src/
  │   ├── css/
  │   │   └── custom.css              # CSS variable overrides, responsive styles
  │   └── pages/                      # Custom non-doc pages (if needed)
  ├── static/
  │   └── img/                        # Static images (favicon, social card, logos)
  ├── templates/                      # Content authoring templates (this guide)
  │   ├── AUTHORING-GUIDE.md
  │   ├── lab-template.md
  │   ├── content-template.md
  │   └── quiz-template.md
  ├── .gitignore
  ├── docusaurus.config.ts            # Main site configuration
  ├── sidebars.ts                     # Sidebar config (autogenerated from filesystem)
  ├── package.json                    # Dependencies and scripts
  ├── package-lock.json
  ├── tsconfig.json                   # TypeScript configuration
  └── README.md
  ```

  For each top-level directory/file, include a brief explanation of its purpose and how it fits into the course platform. Note which files are configuration-only (rarely changed) vs. content files (edited per module).

  Key config files to document briefly:
  - `docusaurus.config.ts`: Site metadata, theme config, plugins, base URL, Mermaid setup
  - `sidebars.ts`: Auto-generated sidebar from filesystem (minimal config needed)
  - `package.json`: Key scripts (`npm start`, `npm run build`, `npm run serve`, `npm run clear`)
  - `tsconfig.json`: Extends `@docusaurus/tsconfig`

  **8. Build and Deploy Workflow** (TEMPLATE-04 - GitHub Actions deployment documentation):
  Document the complete build/deploy pipeline so future courses can replicate it:

  - **Local development**: `npm start` for dev server (hot reload, no search), `npm run build && npm run serve` for production preview (with search)
  - **Build command**: `npm run build` produces static site in `build/` directory
  - **GitHub Actions workflow** (`.github/workflows/deploy.yml`):
    - Trigger: push to `main` branch (also runs build on PRs for validation)
    - Permissions required: `contents: read`, `pages: write`, `id-token: write`
    - Build job: checkout (fetch-depth: 0), setup Node 20 with npm cache, `npm ci`, `npm run build`, upload `build/` as pages artifact
    - Deploy job: runs only on push to main (not PRs), uses `actions/deploy-pages@v4` with OIDC auth
    - Concurrency: `group: "pages"` prevents concurrent deployments
  - **GitHub Pages setup** (one-time):
    - Repository Settings > Pages > Source: select "GitHub Actions" (NOT "Deploy from a branch")
    - No personal access tokens needed (OIDC handles auth)
  - **Key config for deployment**: `url` and `baseUrl` in `docusaurus.config.ts` must match GitHub Pages URL pattern (`https://<org>.github.io/<repo>/`)
  - **Troubleshooting**: Common deployment issues (permissions errors, 404 after deploy, broken assets from wrong baseUrl)

  **9. Per-Module File Organization** - What authors create per module:
  - `docs/section-N/01-overview.mdx` (already exists from Phase 1)
  - `docs/section-N/02-reading.md` (main content - use content-template.md)
  - `docs/section-N/03-lab.md` (hands-on lab - use lab-template.md)
  - `docs/section-N/quiz.md` (quiz prep - use quiz-template.md)
  - `diagrams/section-N/` (diagram source and exports)

  **10. Example Voting App** - Remind authors:
  - App threads through all 10 modules as continuous use case
  - Each module builds on previous module's app state
  - Story-based progression (not isolated examples)
  </action>
  <verify>
  - `templates/AUTHORING-GUIDE.md` exists and is at least 120 lines
  - Contains cross-references to all three templates (lab-template.md, content-template.md, quiz-template.md)
  - Contains cross-reference to `diagrams/README.md` for diagram workflow
  - Contains cross-reference to `.github/workflows/deploy.yml` for deployment
  - Documents voice/tone as conversational and friendly
  - Documents code block conventions with language tag requirement
  - Lists all 5 admonition types with usage guidance
  - Includes diagram embedding quick reference
  - Specifies quiz storage as `docs/section-N/quiz.md`
  - Documents complete project structure (root layout, config files, src/, docs/, static/, diagrams/, templates/, .github/)
  - Documents GitHub Actions deployment workflow (triggers, permissions, build/deploy jobs, GitHub Pages setup)
  - Documents local development commands (npm start, npm run build, npm run serve)
  - Documents per-module file organization
  </verify>
  <done>Authoring guide created as single source of truth for content conventions, project structure, and deployment workflow. Covers voice/tone, code blocks, admonitions, diagrams, quizzes, complete Docusaurus project layout (TEMPLATE-01), GitHub Actions build/deploy pipeline (TEMPLATE-04), per-module file organization, and Example Voting App continuity. Cross-references all three templates and diagrams/README.md.</done>
</task>

</tasks>

<verification>
- All 4 files exist in `templates/` directory
- Lab template has all 8 sections in user-specified order
- Content template is flexible (not rigid) per user decision
- Quiz template shows all 3 question types aligned with TutorLMS fields
- Authoring guide is comprehensive and cross-references all templates plus diagrams/README.md
- Authoring guide documents full project structure for course replication (TEMPLATE-01)
- Authoring guide documents build/deploy workflow for GitHub Actions (TEMPLATE-04)
- No MDX components anywhere (plain Markdown throughout)
- All code blocks have language tags
- No emojis in any content
</verification>

<success_criteria>
1. Lab template follows locked 8-section structure exactly as specified by user
2. Content template provides flexible authoring framework with Docusaurus feature examples
3. Quiz template produces Markdown compatible with manual TutorLMS spreadsheet conversion
4. Authoring guide serves as single reference for all content conventions
5. Full Docusaurus project structure documented for future course replication (TEMPLATE-01)
6. GitHub Actions deployment workflow documented with setup instructions (TEMPLATE-04)
7. Templates ready for immediate use in Phase 3 content creation
</success_criteria>

<output>
After completion, create `.planning/phases/02-content-infrastructure/02-02-SUMMARY.md`
</output>
