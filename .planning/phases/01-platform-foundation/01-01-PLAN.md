---
phase: 01-platform-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docusaurus.config.ts
  - sidebars.ts
  - src/css/custom.css
  - package.json
  - tsconfig.json
  - .gitignore
  - static/img/logo.svg
  - static/img/favicon.ico
autonomous: true

must_haves:
  truths:
    - "Docusaurus dev server starts without errors on localhost:3000"
    - "Site displays syntax-highlighted code blocks with copy button"
    - "Dark mode toggle in navbar switches themes and persists preference"
    - "Site uses readable typography with proper spacing and contrast"
    - "Local search plugin is installed and configured"
  artifacts:
    - path: "docusaurus.config.ts"
      provides: "Complete site configuration"
      contains: "routeBasePath.*/"
    - path: "sidebars.ts"
      provides: "Auto-generated sidebar configuration"
      contains: "autogenerated"
    - path: "src/css/custom.css"
      provides: "Custom styling with dark mode support"
      contains: "data-theme.*dark"
    - path: "package.json"
      provides: "Project dependencies with search plugin"
      contains: "docusaurus-search-local"
  key_links:
    - from: "docusaurus.config.ts"
      to: "sidebars.ts"
      via: "sidebarPath config"
      pattern: "sidebarPath.*sidebars"
    - from: "docusaurus.config.ts"
      to: "src/css/custom.css"
      via: "customCss config"
      pattern: "customCss.*custom\\.css"
    - from: "docusaurus.config.ts"
      to: "@cmfcmf/docusaurus-search-local"
      via: "plugins array"
      pattern: "docusaurus-search-local"
---

<objective>
Initialize a Docusaurus 3.9.2 project with TypeScript classic template and configure it for the Kubernetes Intermediate course site. This includes full site configuration (GitHub Pages URLs, docs-only mode, syntax highlighting with Prism, dark mode, local search plugin) and custom CSS for readable typography.

Purpose: Establish the project scaffold with all configuration so subsequent plans can add content and deployment without touching config files.
Output: Working Docusaurus project that starts with `npm start` and shows default content with correct branding, dark mode, syntax highlighting, and search.
</objective>

<execution_context>
@/Users/gshah/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gshah/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-platform-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Docusaurus project and install dependencies</name>
  <files>
    package.json
    tsconfig.json
    .gitignore
  </files>
  <action>
1. Run `npx create-docusaurus@latest . classic --typescript` from the project root (`/Users/gshah/courses/kubernetes/intermediate/kubernetes-intermediate/`). If it asks about overwriting existing files, accept (the repo only has `.planning/`, `.claude/`, `.gitignore`, and `OUTLINE.md` — none conflict with Docusaurus scaffolding).

2. After scaffolding, install the local search plugin:
   ```bash
   npm install @cmfcmf/docusaurus-search-local
   ```

3. Update `.gitignore` to include Docusaurus-specific entries (merge with existing):
   - `node_modules/`
   - `.docusaurus/`
   - `build/`
   - `.cache-loader/`
   - Keep existing `.planning/` exclusions if any

4. Remove the default `blog/` directory since we're using docs-only mode:
   ```bash
   rm -rf blog/
   ```

5. Remove the default `src/pages/index.tsx` file (docs-only mode uses docs as homepage):
   ```bash
   rm -f src/pages/index.tsx src/pages/index.module.css
   ```

6. Verify scaffolding with `npm start` — should start without errors. Kill the dev server after confirming.

NOTE: The default scaffolding creates sample docs in `docs/` — leave them for now. Plan 02 will replace them with the 10-section structure.
  </action>
  <verify>
- `ls package.json` confirms project scaffolded
- `cat package.json | grep -q "docusaurus-search-local"` confirms search plugin installed
- `ls blog/ 2>/dev/null` returns nothing (blog removed)
- `npm run build` succeeds without errors
  </verify>
  <done>Docusaurus project scaffolded with TypeScript template, local search plugin installed, blog removed, docs-only mode ready</done>
</task>

<task type="auto">
  <name>Task 2: Configure site for Kubernetes Intermediate course</name>
  <files>
    docusaurus.config.ts
    sidebars.ts
    src/css/custom.css
    static/img/logo.svg
  </files>
  <action>
1. **Replace `docusaurus.config.ts`** with the full configuration from research. Key settings:
   - `title`: "Kubernetes Intermediate (SFD301)"
   - `tagline`: "Master Intermediate Kubernetes Concepts"
   - `url`: "https://schoolofdevops.github.io"
   - `baseUrl`: "/kubernetes-intermediate/"
   - `organizationName`: "schoolofdevops"
   - `projectName`: "kubernetes-intermediate"
   - `trailingSlash`: false
   - `onBrokenLinks`: "throw"
   - `onBrokenMarkdownLinks`: "warn"
   - Docs preset with `routeBasePath: '/'` (docs-only mode)
   - `blog: false`
   - `sidebarPath`: "./sidebars.ts"
   - `editUrl`: "https://github.com/schoolofdevops/kubernetes-intermediate/tree/main/"
   - `showLastUpdateTime`: true
   - `showLastUpdateAuthor`: true
   - Navbar with "SFD301" title, logo, Course sidebar link, and GitHub repo link
   - Footer: dark style, School of DevOps copyright with Apache-2.0 mention
   - `colorMode`: defaultMode light, disableSwitch false, respectPrefersColorScheme true
   - `prism`: github light theme, dracula dark theme, additionalLanguages: ['bash', 'yaml', 'json', 'typescript', 'docker', 'go', 'python', 'hcl']
   - `metadata`: keywords for kubernetes, intermediate, course, devops
   - `customCss`: `require.resolve('./src/css/custom.css')` in the classic preset theme config — this is the critical wiring that connects the custom stylesheet to the site
   - Local search plugin in plugins array: `@cmfcmf/docusaurus-search-local` with indexDocs: true, indexBlog: false, language: 'en'

2. **Replace `sidebars.ts`** with auto-generated configuration:
   ```typescript
   import type {SidebarsConfig} from '@docusaurus/plugin-content-docs';
   const sidebars: SidebarsConfig = {
     courseSidebar: [{ type: 'autogenerated', dirName: '.' }],
   };
   export default sidebars;
   ```

3. **Replace `src/css/custom.css`** with the custom CSS from research:
   - Primary brand color: #2e8555 (green, matching Kubernetes ecosystem)
   - Dark theme primary: #25c2a0
   - System font stack for base, monospace stack for code
   - Font size 16px, line height 1.6
   - Spacing, code block enhancements, TOC readability
   - Mobile responsive adjustments at 996px breakpoint
   - Markdown content spacing improvements (paragraphs, headings, lists)
   - Breadcrumbs styling

4. **Create a simple SVG logo** at `static/img/logo.svg`:
   - Simple Kubernetes-themed logo (a hexagonal shape with "K8s" or a stylized wheel)
   - Keep it simple — a clean SVG that works at navbar size (~32x32px)
   - Use the brand primary color (#2e8555)

5. Verify the complete configuration:
   ```bash
   npm run build
   ```
   Build should succeed. Check that the output in `build/` has correct base paths.
  </action>
  <verify>
- `npm run build` succeeds without errors
- `grep -q "routeBasePath" docusaurus.config.ts` confirms docs-only mode
- `grep -q "autogenerated" sidebars.ts` confirms auto-generated sidebar
- `grep -q "data-theme" src/css/custom.css` confirms dark mode CSS
- `grep -q "docusaurus-search-local" docusaurus.config.ts` confirms search plugin configured
- `ls static/img/logo.svg` confirms logo exists
  </verify>
  <done>Site fully configured with correct GitHub Pages URLs, docs-only mode, dark mode toggle, syntax highlighting for YAML/bash/TypeScript, local search plugin, auto-generated sidebar, readable typography with proper spacing, and brand logo</done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `npm run build` succeeds with no errors
2. `npm run serve` serves site at localhost:3000/kubernetes-intermediate/
3. Dark mode toggle visible in navbar and switches themes
4. Code blocks show syntax highlighting with copy button
5. Site uses system font with 1.6 line height (readable typography)
6. Sidebar shows auto-generated content from docs/
</verification>

<success_criteria>
- Docusaurus 3.9.2 project initialized with TypeScript
- Local search plugin installed and configured
- docusaurus.config.ts has complete GitHub Pages configuration
- docs-only mode enabled (routeBasePath: '/')
- Dark mode works with localStorage persistence
- Syntax highlighting configured for bash, yaml, json, typescript
- Custom CSS provides readable typography
- `npm run build` produces deployable artifact in build/
</success_criteria>

<output>
After completion, create `.planning/phases/01-platform-foundation/01-01-SUMMARY.md`
</output>
