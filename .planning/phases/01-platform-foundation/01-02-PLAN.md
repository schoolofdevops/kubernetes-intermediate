---
phase: 01-platform-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - docs/section-0/_category_.json
  - docs/section-0/01-overview.mdx
  - docs/section-1/_category_.json
  - docs/section-1/01-overview.mdx
  - docs/section-2/_category_.json
  - docs/section-2/01-overview.mdx
  - docs/section-3/_category_.json
  - docs/section-3/01-overview.mdx
  - docs/section-4/_category_.json
  - docs/section-4/01-overview.mdx
  - docs/section-5/_category_.json
  - docs/section-5/01-overview.mdx
  - docs/section-6/_category_.json
  - docs/section-6/01-overview.mdx
  - docs/section-7/_category_.json
  - docs/section-7/01-overview.mdx
  - docs/section-8/_category_.json
  - docs/section-8/01-overview.mdx
  - docs/section-9/_category_.json
  - docs/section-9/01-overview.mdx
  - docs/index.mdx
  - .github/workflows/deploy.yml
autonomous: false

must_haves:
  truths:
    - "Left sidebar shows all 10 course sections in correct order with hierarchical labels"
    - "Right sidebar (TOC) shows H2/H3 headings for the current page"
    - "Breadcrumbs display current location in course hierarchy"
    - "Next/Previous buttons navigate sequentially through all sections"
    - "Search finds content across all 10 sections"
    - "Site is fully responsive on mobile (hamburger menu, sidebar, readable content)"
    - "GitHub Actions workflow file exists and is syntactically valid"
    - "npm run build produces a deployable artifact"
  artifacts:
    - path: "docs/index.mdx"
      provides: "Course homepage / landing page"
      contains: "slug.*/"
    - path: "docs/section-0/_category_.json"
      provides: "Section 0 sidebar metadata"
      contains: "Essentials Refresh"
    - path: "docs/section-9/_category_.json"
      provides: "Section 9 sidebar metadata"
      contains: "Agentic Kubernetes"
    - path: ".github/workflows/deploy.yml"
      provides: "GitHub Actions deployment workflow"
      contains: "deploy-pages"
    - path: "docs/section-0/01-overview.mdx"
      provides: "Placeholder content with H2/H3 headings and code blocks"
      contains: "sidebar_position"
  key_links:
    - from: "docs/section-N/_category_.json"
      to: "sidebar rendering"
      via: "auto-generated sidebar reads position and label"
      pattern: "position.*[0-9]"
    - from: "docs/section-N/01-overview.mdx"
      to: "TOC sidebar"
      via: "H2/H3 headings parsed for right sidebar"
      pattern: "^##"
    - from: ".github/workflows/deploy.yml"
      to: "GitHub Pages"
      via: "actions/deploy-pages@v4"
      pattern: "deploy-pages@v4"
    - from: "docs/index.mdx"
      to: "site root"
      via: "slug: / in frontmatter"
      pattern: "slug.*/"
---

<objective>
Create the 10-section content structure with placeholder documentation and the GitHub Actions deployment workflow. Placeholder docs include enough content to verify all navigation features (sidebar, TOC, breadcrumbs, next/prev, search) and demonstrate syntax highlighting with code blocks.

Purpose: Establish the complete content hierarchy so all navigation requirements (NAV-01 through NAV-06) can be verified, and create the CI/CD pipeline for automated deployment (SITE-05, SITE-06).
Output: 10 section folders with placeholder docs, course homepage, GitHub Actions workflow, and verified build.
</objective>

<execution_context>
@/Users/gshah/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gshah/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-platform-foundation/01-RESEARCH.md
@.planning/phases/01-platform-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create 10-section content structure with placeholder docs</name>
  <files>
    docs/index.mdx
    docs/section-0/_category_.json
    docs/section-0/01-overview.mdx
    docs/section-1/_category_.json
    docs/section-1/01-overview.mdx
    docs/section-2/_category_.json
    docs/section-2/01-overview.mdx
    docs/section-3/_category_.json
    docs/section-3/01-overview.mdx
    docs/section-4/_category_.json
    docs/section-4/01-overview.mdx
    docs/section-5/_category_.json
    docs/section-5/01-overview.mdx
    docs/section-6/_category_.json
    docs/section-6/01-overview.mdx
    docs/section-7/_category_.json
    docs/section-7/01-overview.mdx
    docs/section-8/_category_.json
    docs/section-8/01-overview.mdx
    docs/section-9/_category_.json
    docs/section-9/01-overview.mdx
  </files>
  <action>
NOTE: This task creates 21 files (10 _category_.json + 10 01-overview.mdx + 1 index.mdx). These are repetitive boilerplate templates with low complexity — each _category_.json is ~7 lines and each overview is a formulaic placeholder. Total unique logic is minimal.

1. **Remove default Docusaurus sample docs** (created by scaffolding):
   ```bash
   rm -rf docs/intro.md docs/tutorial-basics/ docs/tutorial-extras/
   ```

2. **Create `docs/index.mdx`** — Course homepage:
   ```mdx
   ---
   slug: /
   sidebar_position: 0
   title: Welcome
   ---

   # Kubernetes Intermediate (SFD301)

   Welcome to the Kubernetes Intermediate course by School of DevOps.

   ## What You'll Learn

   This course bridges Kubernetes basics to production-grade systems using a single realistic application — the Example Voting App.

   ## Course Sections

   - **Section 0**: Essentials Refresh & KIND Setup
   - **Section 1**: Advanced Pod Scheduling & Placement
   - **Section 2**: Resource Management & Autoscaling
   - **Section 3**: Gateway API & Traffic Control
   - **Section 4**: Service Mesh Decision Making
   - **Section 5**: Security for Application Teams
   - **Section 6**: Helm for Real-World Applications
   - **Section 7**: Extending Kubernetes with CRDs
   - **Section 8**: Writing Kubernetes Operators
   - **Section 9**: Intro to Agentic Kubernetes

   ## Prerequisites

   You should have completed Kubernetes Essentials or have equivalent experience with Pods, Deployments, Services, ConfigMaps, and Secrets.
   ```

3. **Create 10 section folders** (`docs/section-0/` through `docs/section-9/`), each with:

   **`_category_.json`** — with correct position and label. Map sections:
   | Folder | Position | Label |
   |--------|----------|-------|
   | section-0 | 1 | "Section 0: Essentials Refresh" |
   | section-1 | 2 | "Section 1: Pod Scheduling" |
   | section-2 | 3 | "Section 2: Resource Management" |
   | section-3 | 4 | "Section 3: Gateway API" |
   | section-4 | 5 | "Section 4: Service Mesh" |
   | section-5 | 6 | "Section 5: Security" |
   | section-6 | 7 | "Section 6: Helm" |
   | section-7 | 8 | "Section 7: CRDs" |
   | section-8 | 9 | "Section 8: Operators" |
   | section-9 | 10 | "Section 9: Agentic K8s" |

   Each `_category_.json`:
   ```json
   {
     "label": "Section N: Title",
     "position": N,
     "collapsible": true,
     "collapsed": false,
     "link": {
       "type": "generated-index",
       "description": "Section overview"
     }
   }
   ```

   **`01-overview.mdx`** — Placeholder page with H2/H3 headings (to test TOC sidebar) and a code block (to test syntax highlighting + copy button). Each section's placeholder should have:
   - Frontmatter: `sidebar_position: 1`, `title: "Overview"`
   - An H2 heading ("## Overview")
   - A brief placeholder paragraph mentioning the section topic
   - An H3 heading ("### Key Concepts")
   - A bullet list of 3-4 concepts from that section
   - An H3 heading ("### Example")
   - A YAML code block with a relevant Kubernetes manifest snippet (to verify syntax highlighting and copy button)
   - An H2 heading ("## Coming Soon")
   - A note that full content will be added in later phases

   **Section content hints** (for realistic placeholder code blocks):
   - Section 0: Simple pod manifest
   - Section 1: Pod with nodeSelector or affinity
   - Section 2: Pod with resource limits
   - Section 3: HTTPRoute manifest
   - Section 4: Service mesh sidecar annotation
   - Section 5: NetworkPolicy manifest
   - Section 6: Helm values.yaml snippet
   - Section 7: CRD manifest
   - Section 8: Operator controller snippet (Go code block)
   - Section 9: Kubernetes MCP tool config (YAML)

4. **Verify sidebar structure:**
   ```bash
   npm run build
   ```
   Build must succeed. Check that all 10 sections appear in the generated sidebar output.
  </action>
  <verify>
- `ls docs/section-{0..9}/_category_.json` shows 10 _category_.json files
- `ls docs/section-{0..9}/01-overview.mdx` shows 10 overview files
- `ls docs/index.mdx` confirms homepage exists
- `npm run build` succeeds
- `ls docs/intro.md 2>/dev/null` returns nothing (default docs removed)
  </verify>
  <done>10 section folders with placeholder docs exist, each with _category_.json metadata and overview page containing H2/H3 headings and YAML code blocks. Course homepage (index.mdx) serves as landing page. All default sample docs removed.</done>
</task>

<task type="auto">
  <name>Task 2: Create GitHub Actions deployment workflow</name>
  <files>
    .github/workflows/deploy.yml
  </files>
  <action>
1. Create `.github/workflows/` directory:
   ```bash
   mkdir -p .github/workflows
   ```

2. Create `.github/workflows/deploy.yml` with the workflow from research:
   - Trigger: push to main, pull_request to main
   - Permissions: contents read, pages write, id-token write
   - Concurrency group: "pages" with cancel-in-progress: false
   - **Build job:** checkout@v4, setup-node@v4 (node 20, cache npm), npm ci, npm run build, upload-pages-artifact@v3 (path: build/)
   - **Deploy job:** Only on push to main (not PRs), needs build, environment github-pages, deploy-pages@v4

3. Verify workflow syntax:
   ```bash
   # Check YAML validity
   cat .github/workflows/deploy.yml | python3 -c "import yaml, sys; yaml.safe_load(sys.stdin)" && echo "Valid YAML"
   ```

4. Run final full build to confirm everything works together:
   ```bash
   npm run build
   ```
  </action>
  <verify>
- `ls .github/workflows/deploy.yml` confirms workflow exists
- YAML is valid (python3 yaml.safe_load succeeds)
- `grep -q "deploy-pages@v4" .github/workflows/deploy.yml` confirms correct action version
- `grep -q "upload-pages-artifact@v3" .github/workflows/deploy.yml` confirms artifact upload
- `grep -q "id-token: write" .github/workflows/deploy.yml` confirms OIDC permissions
- `npm run build` succeeds
  </verify>
  <done>GitHub Actions workflow exists with correct OIDC permissions, build/deploy separation, PR build-only mode, and concurrency control. Workflow is syntactically valid YAML.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Verify site functionality and enable GitHub Pages deployment</name>
  <what-built>
Complete Docusaurus site with 10-section navigation structure, dark mode, syntax-highlighted code blocks, local search, responsive design, and GitHub Actions deployment workflow.
  </what-built>
  <how-to-verify>
**Local verification (Claude runs `npm run serve` before checkpoint):**

1. **Navigation (NAV-01, NAV-05):** Open http://localhost:3000/kubernetes-intermediate/
   - Left sidebar shows all 10 sections (Section 0 through Section 9) in correct order
   - Click through several sections — Next/Previous buttons at bottom of each page
   - Breadcrumbs show current location (e.g., "Home > Section 1: Pod Scheduling > Overview")

2. **Table of Contents (NAV-02):** Click any section overview page
   - Right sidebar shows H2/H3 headings (Overview, Key Concepts, Example, Coming Soon)
   - Clicking a TOC entry scrolls to that heading

3. **Code Blocks (SITE-01):** On any section overview page
   - YAML code block has syntax highlighting (colored keywords)
   - Copy button appears on hover over code block
   - Click copy — content copies to clipboard

4. **Dark Mode (SITE-03):** Click the sun/moon toggle in the navbar
   - Site switches between light and dark themes
   - Refresh page — theme preference persists (localStorage)

5. **Responsive Design (SITE-02, NAV-06):** Open browser DevTools, toggle device toolbar
   - At mobile width: hamburger menu appears, sidebar becomes slide-out
   - Content remains readable, code blocks scroll horizontally
   - Navigation remains functional

6. **Search (NAV-03):** Build first: `npm run build && npm run serve`
   - Search bar visible in navbar
   - Type "scheduling" — results should include Section 1
   - Type "security" — results should include Section 5

**GitHub Pages setup (requires human action):**

7. **Enable GitHub Actions deployment source:**
   - Go to https://github.com/schoolofdevops/kubernetes-intermediate/settings/pages
   - Under "Build and deployment" > Source, select "GitHub Actions"
   - Save

8. **Push to main** to trigger first deployment:
   - After push, check Actions tab for successful workflow
   - Verify site at https://schoolofdevops.github.io/kubernetes-intermediate/
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe issues found</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run build` succeeds with zero errors
2. All 10 sections visible in left sidebar with correct labels and order
3. TOC (right sidebar) shows headings on content pages
4. Code blocks have syntax highlighting and copy button
5. Dark mode toggle works with persistence
6. Breadcrumbs show navigation path
7. Next/Previous buttons navigate through content
8. Site is responsive (desktop, tablet, mobile)
9. Search finds content across sections (production build only)
10. GitHub Actions workflow is syntactically valid
11. Site deploys to GitHub Pages (after human enables deployment source)
</verification>

<success_criteria>
- 10 section folders exist with _category_.json and placeholder overview pages
- Course homepage (docs/index.mdx) serves as landing page with slug: /
- GitHub Actions workflow deploys on push to main with OIDC authentication
- All 12 Phase 1 requirements (SITE-01 through SITE-06, NAV-01 through NAV-06) are satisfied
- Build produces deployable artifact in build/ directory
</success_criteria>

<output>
After completion, create `.planning/phases/01-platform-foundation/01-02-SUMMARY.md`
</output>
